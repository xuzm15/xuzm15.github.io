---
title: "部署项目到网易蜂巢docker"
description: "部署项目到网易蜂巢docker"
pubDate: 2016-11-11T01:31:40.000Z
tags: ["网易蜂巢", "Docker"]
lang: zh
slug: 20161111-netease-deploy
---

将一个javaweb项目部署到网易蜂巢docker的步骤。

# 建立docker javaweb

选择镜像：javaweb:latest

# 安装vim

```
apt-get update
apt-get install vim
```

# 数据库设置

```
//mysql初始密码为空
mysql
set password for root@localhost = password('123456');
set password for root@'127.0.0.1' = password('123456');
//之后正常新建数据库
```

# 从github下拉项目

```
git clone https://github.com/userName/projectName.git
```

# 部署到IP根目录（IP:8080）

```
//cd到项目target目录下
cp projectName.war /var/lib/tomcat7/webapps/ROOT.war
```

# 调试（查看错误信息）

```
find / -name "Catalina.out"
//cd到该目录
tail -n 20 catalina.out // 显示最后 20 行
```

# OOM解决方案

打开文件`/usr/share/tomcat7/bin/catalina.sh`, 在`OS specific support`下添加`JAVA_OPTS="-Xms256m -Xmx512m -Xss1024K -XX:PermSize=128m -XX:MaxPermSize=256m"`保存文件后`service tomcat7 restart`。