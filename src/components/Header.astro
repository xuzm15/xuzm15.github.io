---
import { getRelativeLocaleUrl } from 'astro:i18n';
import { i18n, type Locale } from '../i18n';

interface Props {
	lang: Locale;
}

const { lang } = Astro.props;
const t = i18n[lang].nav;
const homeUrl = getRelativeLocaleUrl(lang, '');
const archivesUrl = getRelativeLocaleUrl(lang, 'archives');
const tagsUrl = getRelativeLocaleUrl(lang, 'tags');
const aboutUrl = getRelativeLocaleUrl(lang, 'about');
const otherLang = lang === 'zh' ? 'en' : 'zh';
const pathname = Astro.url.pathname;
const switchUrl = `/${otherLang}${pathname.slice(lang.length + 1) || '/'}`;
---

<header
	class="sticky top-0 z-50 w-full backdrop-blur-md bg-white/70 dark:bg-zinc-950/70 border-b border-zinc-200 dark:border-zinc-800 transition-colors duration-300"
>
	<nav class="flex items-center justify-between max-w-4xl mx-auto px-4 py-4">
		<a
			href={homeUrl}
			class="text-xl font-bold tracking-tighter hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
		>
			{i18n[lang].siteTitle}
		</a>
		<div class="flex items-center gap-6 text-sm font-medium">
			<a
				href={homeUrl}
				class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
				>{t.home}</a
			>
			<a
				href={archivesUrl}
				class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
				>{t.archives}</a
			>
			<a
				href={tagsUrl}
				class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
				>{t.tags}</a
			>
			<a
				href={aboutUrl}
				class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
				>{t.about}</a
			>
			<a
				href={switchUrl}
				class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
				title={i18n[lang].pages.langSwitch}
				>{lang === 'zh' ? 'English' : '中文'}</a
			>
		</div>
	</nav>
</header>
