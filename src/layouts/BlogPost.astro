---
import type { CollectionEntry } from 'astro:content';
import type { Locale } from '../i18n';
import BaseLayout from './BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { Image } from 'astro:assets';

type Props = CollectionEntry<'blog'>['data'] & {
	lang: Locale;
	otherLangUrl?: string;
	otherLangLabel?: string;
	lastUpdatedLabel?: string;
};

const { title, description, pubDate, updatedDate, heroImage, lang, otherLangUrl, otherLangLabel, lastUpdatedLabel } = Astro.props;
---

<BaseLayout title={title} description={description} lang={lang}>
	<article class="prose dark:prose-invert lg:prose-lg mx-auto py-8">
		<div class="hero-image mb-8">
			{
				heroImage && (
					<Image
						width={1020}
						height={510}
						src={heroImage}
						alt=""
						class="rounded-xl shadow-md w-full"
					/>
				)
			}
		</div>
		<div class="title text-center mb-12">
			<div class="date text-zinc-500 dark:text-zinc-400 mb-2 flex flex-wrap items-center justify-center gap-x-4 gap-y-1">
				<FormattedDate date={pubDate} />
				{
					updatedDate && lastUpdatedLabel && (
						<div class="last-updated-on italic text-sm">
							{lastUpdatedLabel} <FormattedDate date={updatedDate} />
						</div>
					)
				}
				{otherLangUrl && otherLangLabel && (
					<a
						href={otherLangUrl}
						class="text-sm text-blue-600 dark:text-blue-400 hover:underline"
					>
						{otherLangLabel}
					</a>
				)}
			</div>
			<h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-4">
				{title}
			</h1>
			<hr class="border-zinc-200 dark:border-zinc-800" />
		</div>
		<div class="content">
			<slot />
		</div>
	</article>
</BaseLayout>
